#!/bin/bash

base_water="waetr"
base_stir="rit."
base_bestchol="bestchol"

# Convert from custom base to decimal
to_decimal() {
  local input=$1
  local base_chars=$2
  local base_len=${#base_chars}
  local value=0
  for (( i=0; i<${#input}; i++ )); do
    char=${input:i:1}
    pos=$(expr index "$base_chars" "$char")
    ((pos--))  # expr index is 1-based
    value=$((value * base_len + pos))
  done
  echo "$value"
}

# Convert from decimal to custom base
from_decimal() {
  local num=$1
  local base_chars=$2
  local base_len=${#base_chars}
  local result=""
  while [ "$num" -gt 0 ]; do
    rem=$((num % base_len))
    result="${base_chars:rem:1}$result"
    num=$((num / base_len))
  done
  echo "${result:-${base_chars:0:1}}"
}

# Main
dec_water=$(to_decimal "$WATER" "$base_water")
dec_stir=$(to_decimal "$STIR" "$base_stir")
sum=$((dec_water + dec_stir))
from_decimal "$sum" "$base_bestchol"
